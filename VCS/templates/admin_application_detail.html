{% extends 'base.html' %}
{% block content %}

<div class="max-w-4xl mx-auto bg-white shadow rounded-xl p-8">

<h1 class="text-2xl font-bold mb-6 text-blue-600">
    ğŸ“„ Application Detail
</h1>

<!-- Candidate Card -->
<div class="grid md:grid-cols-2 gap-6 mb-6">

<div class="bg-gray-50 p-5 rounded-lg">
    <h2 class="font-semibold text-lg mb-2">ğŸ‘¤ Candidate Info</h2>
    <p><strong>name:</strong> {{ application.user.username }}</p>
    <p><strong>Email:</strong> {{ application.user.email }}</p>
</div>

<div class="bg-gray-50 p-5 rounded-lg">
    <h2 class="font-semibold text-lg mb-2">ğŸ’¼ Job Info</h2>
    <p><strong>Title:</strong> {{ application.job.job_title }}</p>
    <p><strong>Company:</strong> {{ application.job.company_name }}</p>
    <p><strong>Location:</strong> {{ application.job.location }}</p>
</div>

</div>

<!-- Application Info -->
<div class="bg-gray-50 p-5 rounded-lg mb-6">
    <h2 class="font-semibold text-lg mb-2">ğŸ“Š Application Status</h2>

    <p class="mb-2">
        <strong>Applied On:</strong> {{ application.applied_at|date:"d M Y H:i" }}
    </p>

    <p class="mb-4">
        <strong>Current Status:</strong>
        <span class="px-3 py-1 rounded-full text-sm
        {% if application.status == 'HIRED' %}bg-green-100 text-green-700
        {% elif application.status == 'REJECTED' %}bg-red-100 text-red-700
        {% elif application.status == 'WAITING' %}bg-purple-100 text-purple-700
        {% elif application.status == 'VIEWED' %}bg-yellow-100 text-yellow-700
        {% else %}bg-blue-100 text-blue-700{% endif %}">
            {{ application.status }}
        </span>
    </p>

    <!-- Update Status Form -->
    <form method="post" class="flex items-center gap-4">
        {% csrf_token %}
        <select name="status" class="border rounded px-3 py-2">
            {% for key,label in status_choices %}
                <option value="{{ key }}" {% if key == application.status %}selected{% endif %}>
                    {{ label }}
                </option>
            {% endfor %}
        </select>

        <button class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
            Update Status
        </button>
    </form>
</div>

<!-- Resume -->
{% if application.resume %}
<div class="bg-gray-50 p-5 rounded-lg mb-6">
    <h2 class="font-semibold text-lg mb-2">ğŸ“ Resume</h2>
    <a href="{{ application.resume.url }}" target="_blank"
       class="text-blue-600 hover:underline">
        Download Resume
    </a>
</div>
{% endif %}

<!-- Back -->
<a href="{% url 'admin_analytics' %}" class="text-blue-600 hover:underline">
    â† Back to Analytics
</a>

</div>

{% endblock %}

{% extends 'base.html' %}
{% block content %}

<!-- Page Wrapper -->
<div class="px-4 sm:px-6 lg:px-8">

<h1 class="text-2xl sm:text-3xl font-bold mb-6 flex items-center gap-2">
    <i class='bx bx-bar-chart-alt-2 text-blue-600 text-2xl sm:text-3xl'></i>
    Admin Dashboard
</h1>

<!-- DASHBOARD CARDS -->
<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-5">

<!-- Jobs -->
<a href="{% url 'admin_jobs' %}"
class="p-5 sm:p-6 rounded-2xl shadow-lg bg-gradient-to-r from-blue-500 to-blue-600 text-white transition hover:shadow-xl">

<div class="flex items-center justify-between">
    <div>
        <p class="text-xs sm:text-sm opacity-80">Total Jobs</p>
        <h2 class="text-2xl sm:text-3xl font-bold">{{ total_jobs }}</h2>
    </div>
    <i class='bx bx-briefcase text-3xl sm:text-4xl'></i>
</div>

<p class="mt-3 text-xs sm:text-sm opacity-80">Manage job postings</p>
</a>

<!-- Candidates -->
<a href="{% url 'admin_candidates' %}"
class="p-5 sm:p-6 rounded-2xl shadow-lg bg-gradient-to-r from-blue-500 to-blue-600 text-white transition hover:shadow-xl">

<div class="flex items-center justify-between">
    <div>
        <p class="text-xs sm:text-sm opacity-80">Candidates</p>
        <h2 class="text-2xl sm:text-3xl font-bold">{{ total_candidates }}</h2>
    </div>
    <i class='bx bx-user text-3xl sm:text-4xl'></i>
</div>

<p class="mt-3 text-xs sm:text-sm opacity-80">View all candidates</p>
</a>

<!-- Applications -->
<a href="{% url 'admin_analytics' %}"
class="p-5 sm:p-6 rounded-2xl shadow-lg bg-gradient-to-r from-blue-500 to-blue-600 text-white transition hover:shadow-xl">

<div class="flex items-center justify-between">
    <div>
        <p class="text-xs sm:text-sm opacity-80">Applications</p>
        <h2 class="text-2xl sm:text-3xl font-bold">{{ total_applications }}</h2>
    </div>
    <i class='bx bx-file text-3xl sm:text-4xl'></i>
</div>

<p class="mt-3 text-xs sm:text-sm opacity-80">Track job applications</p>
</a>

<!-- Queries -->
<a href="{% url 'admin_queries' %}"
class="p-5 sm:p-6 rounded-2xl shadow-lg bg-gradient-to-r from-blue-500 to-blue-600 text-white transition hover:shadow-xl">

<div class="flex items-center justify-between">
    <div>
        <p class="text-xs sm:text-sm opacity-80">Open Queries</p>
        <h2 class="text-2xl sm:text-3xl font-bold">{{ pending_queries }}</h2>
    </div>
    <i class='bx bx-help-circle text-3xl sm:text-4xl'></i>
</div>

<p class="mt-3 text-xs sm:text-sm opacity-80">Support requests</p>
</a>

<!-- Consultant Dashboard -->
<a href="{% url 'consultant_dashboard' %}"
class="p-5 sm:p-6 rounded-2xl shadow-lg bg-gradient-to-r from-blue-500 to-blue-600 text-white transition hover:shadow-xl">

<div class="flex items-center justify-between">
    <div>
        <p class="text-xs sm:text-sm opacity-80">Consultant</p>
        <h2 class="text-lg sm:text-xl font-bold">Schedules</h2>
    </div>
    <i class='bx bx-calendar text-3xl sm:text-4xl'></i>
</div>

<p class="mt-3 text-xs sm:text-sm opacity-80">Interviews & 1-1 Sessions</p>
</a>

<!-- Consultant Calendar -->
<a href="{% url 'admin_calendar' %}"
class="p-5 sm:p-6 rounded-2xl shadow-lg bg-gradient-to-r from-blue-500 to-blue-600 text-white transition hover:shadow-xl">

<div class="flex items-center justify-between">
    <div>
        <p class="text-xs sm:text-sm opacity-80">Consultant</p>
        <h2 class="text-lg sm:text-xl font-bold">Calendar</h2>
    </div>
    <i class='bx bx-calendar text-3xl sm:text-4xl'></i>
</div>

<p class="mt-3 text-xs sm:text-sm opacity-80">Interviews & 1-1 Sessions</p>
</a>

<!-- Training Courses -->
<a href="{% url 'admin_courses' %}" class="block p-5 sm:p-6 rounded-2xl shadow-lg bg-gradient-to-r from-blue-500 to-blue-600 text-white transition hover:shadow-xl">
    <div class="flex items-center justify-between">
        <div>
            <p class="text-xs sm:text-sm opacity-80">Training</p>
            <h2 class="text-lg sm:text-xl font-bold">Courses</h2>
        </div>
        <i class='bx bx-book text-3xl sm:text-4xl'></i>
    </div>
    <p class="mt-3 text-xs sm:text-sm opacity-80">Manage enrollments & progress</p>
</a>

<!-- Consultant Tracking (Styled Card) -->
<a href="{% url 'admin_consultant_tracking' %}"
class="p-5 sm:p-6 rounded-2xl shadow-lg bg-gradient-to-r from-blue-500 to-blue-600 text-white transition hover:shadow-xl">

<div class="flex items-center justify-between">
    <div>
        <p class="text-xs sm:text-sm opacity-80">Consultant</p>
        <h2 class="text-lg sm:text-xl font-bold">Tracking</h2>
    </div>
    <i class='bx bx-time-five text-3xl sm:text-4xl'></i>
</div>

<p class="mt-3 text-xs sm:text-sm opacity-80">Monitor hours & sessions</p>
</a>

</div>

<!-- ANALYTICS -->
<div class="mt-10 grid grid-cols-1 lg:grid-cols-2 gap-6">

<div class="bg-white rounded-2xl shadow p-5 sm:p-6">
    <h3 class="text-lg sm:text-xl font-semibold mb-4 flex items-center gap-2">
        <i class='bx bx-line-chart text-blue-600'></i> Quick Stats
    </h3>
    <ul class="space-y-2 text-sm text-gray-600">
        <li><i class='bx bx-check text-green-600'></i> Active Jobs: {{ total_jobs }}</li>
        <li><i class='bx bx-check text-green-600'></i> Registered Candidates: {{ total_candidates }}</li>
        <li><i class='bx bx-check text-green-600'></i> Total Applications: {{ total_applications }}</li>
        <li><i class='bx bx-check text-green-600'></i> Pending Queries: {{ pending_queries }}</li>
        <!-- NEW: Added SLA Compliance -->
        <li><i class='bx bx-check text-green-600'></i> SLA Compliance: {% if sla_compliance %}{{ sla_compliance|floatformat:1 }}%{% else %}N/A{% endif %}</li>
    </ul>
</div>

<!-- NEW: Added Tier Conversions Section -->
<div class="bg-white rounded-2xl shadow p-5 sm:p-6">
    <h3 class="text-lg sm:text-xl font-semibold mb-4 flex items-center gap-2">
        <i class='bx bx-trending-up text-green-600'></i> Tier Conversions
    </h3>
    <ul class="space-y-2 text-sm text-gray-600">
        {% for conversion in tier_conversions %}
            <li><i class='bx bx-check text-green-600'></i> {{ conversion.plan_name }}: {{ conversion.count }}</li>
        {% empty %}
            <li>No conversions data available.</li>
        {% endfor %}
    </ul>
</div>

<div class="bg-white rounded-2xl shadow p-5 sm:p-6">
    <h3 class="text-lg sm:text-xl font-semibold mb-4 flex items-center gap-2">
        <i class='bx bx-cog text-purple-600'></i> Admin Actions
    </h3>
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
        <a href="{% url 'chatfaq' %}"
           class="bg-blue-600 text-white p-3 rounded-lg text-center hover:bg-blue-700 flex items-center justify-center gap-2">
            <i class='bx bx-bot'></i> Chatbot FAQ
        </a>
    </div>
</div>

</div>

</div>
{% endblock %}